# 进程编程

## 目录

- [1 进程基本概念](#1)
- [2 信号](#2)

<h2 id="1">进程基本概念</h2>

进程（process）的定义：

- 进程是描述程序执行过程和资源共享的基本单位
- 主要目的：控制和协调程序的执行

进程相关函数：

- 用户和组 ID 函数
- 创建进程：system()、fork()、exec()
- 终止进程：kill()
- 等待进程终止：wait()、waitpid()

进程组：

- 定义：由一个或多个相关联的进程组成，目的是为了作业控制
- 进程组的主要特征：信号可以发送给进程组中的所有进程，并使该进程组中的所有子进程终止、停止或继续运行
- 每个进程都属于某个进程组

进程组函数

- 获取进程组 ID：pid_t getpgid(pid_t pid);
  - 返回 pid 进程的进程组 ID；若 pid 为 0，则返回当前进程的进程组 ID；出错时返回 -1，并设 errno 值
- 设置进程组 ID：int setpgid(pid_t pid, pid_t pgid);
  - 若 pid 为0，则使用调用者 PID；若 pgid 为 0，则将 pid 进程的进程 PID 设为 进程组 ID；成功时返回 0，出错时返回 -1，并设 errno 值

会话（session）

- 会话为一个或多个进程组的集合，包括登录用户的全部活动，并具有一个控制终端
- 登录进程为每个用户创建一个会话，用户登录 shell 进程成为会话首领，其 PID 设为会话 ID
- 非会话首领进程通过调用 setsid() 函数创建新会话，并成为首领

进程组函数

- 获取会话ID：pid_t getsid(pid_t pid);
  - 返回 pid 进程的会话 ID；若 pid 为 0，则返回当前进程的会话 ID；成功时返回会话 ID，出错时返回 -1，并设 errno 值
- 设置会话 ID：pid_t setsid();
  - 成功时返回新创建的会话 ID，出错时返回 -1，并设 errno 值

<h2 id="2">2 信号</h2>

信号（signal）：进程通讯机制

- 信号是发送给进程的特殊异步消息
- 当进程接收到信息时立即处理，此时并不需要完成当前函数调用甚至当前代码行
- Linux 系统中有多种信号，各具有不同的意义；系统以数字表示不同的信号，程序一般以名称引用之

系统信号

- 缺省处理逻辑：终止进程，生成内核转储文件
- 使用 kill -l 命令查看操作系统支持的信号列表，不同的系统可能有所不同
